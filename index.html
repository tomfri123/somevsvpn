<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dopad zákazu sociálních sítí (Offline Demo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
            color: #1F2937;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; 
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        .gradient-text {
            background: linear-gradient(to right, #4F46E5, #EC4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Flowchart styling without SVG */
        .flow-step {
            border: 2px solid #E5E7EB;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            background-color: #F9FAFB;
            font-weight: 600;
            position: relative;
        }
        
        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9CA3AF;
            font-size: 1.5rem;
            padding: 0.5rem 0;
        }

        @media (min-width: 768px) {
            .flow-arrow {
                transform: rotate(-90deg);
                padding: 0;
                width: 2rem;
            }
        }

        /* AI Section Specifics */
        .ai-glow {
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.3);
            border: 1px solid rgba(79, 70, 229, 0.5);
        }
        
        .loading-dots:after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { color: rgba(0,0,0,0); text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            40% { color: #4F46E5; text-shadow: .25em 0 0 rgba(0,0,0,0), .5em 0 0 rgba(0,0,0,0);}
            60% { text-shadow: .25em 0 0 #4F46E5, .5em 0 0 rgba(0,0,0,0);}
            80%, 100% { text-shadow: .25em 0 0 #4F46E5, .5em 0 0 #4F46E5;}
        }
        
        .demo-badge {
            background-color: #FCD34D;
            color: #92400E;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            vertical-align: middle;
            display: inline-block;
        }
    </style>
</head>
<body class="bg-gray-100">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <h1 class="text-2xl font-bold text-gray-900">Digital<span class="text-indigo-600">Insight</span> <span class="demo-badge">DEMO</span></h1>
            <nav class="hidden md:flex space-x-8 text-sm font-medium text-gray-500">
                <a href="#impact" class="hover:text-indigo-600 transition">Dopad zákazu</a>
                <a href="#vpn" class="hover:text-indigo-600 transition">Efekt VPN</a>
                <a href="#ai-lab" class="flex items-center text-indigo-600 font-bold hover:text-indigo-800 transition">
                    <span class="mr-1">✨</span> AI Laboratoř
                </a>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-12">

        <!-- Hero Section -->
        <section class="text-center space-y-6 max-w-4xl mx-auto">
            <h2 class="text-4xl md:text-6xl font-extrabold tracking-tight text-gray-900">
                Zákaz sociálních sítí: <br>
                <span class="gradient-text">Ochrana nebo Iluze?</span>
            </h2>
            <p class="text-xl text-gray-600 leading-relaxed">
                Vlády po celém světě zavádějí přísná omezení sociálních sítí pro děti a dospívající. 
                Data však ukazují komplexní realitu: zatímco oficiální čísla klesají, alternativní cesty 
                k digitálnímu obsahu zažívají bezprecedentní růst.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-8">
                <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                    <div class="text-4xl font-bold text-indigo-600 mb-2">35%</div>
                    <div class="text-sm text-gray-600 font-semibold">Prvotní pokles aktivity</div>
                </div>
                <div class="bg-pink-50 p-6 rounded-xl border border-pink-100">
                    <div class="text-4xl font-bold text-pink-600 mb-2">+400%</div>
                    <div class="text-sm text-gray-600 font-semibold">Nárůst hledání VPN</div>
                </div>
                <div class="bg-purple-50 p-6 rounded-xl border border-purple-100">
                    <div class="text-4xl font-bold text-purple-600 mb-2">13-16</div>
                    <div class="text-sm text-gray-600 font-semibold">Nejvíce zasažený věk</div>
                </div>
            </div>
        </section>

        <!-- Section 1: Usage Trends -->
        <div id="impact" class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="md:col-span-2 space-y-4">
                <h3 class="text-2xl font-bold text-gray-900 border-l-4 border-indigo-600 pl-4">Okamžitý dopad vs. Dlouhodobá adaptace</h3>
                <p class="text-gray-600">
                    Následující graf znázorňuje typický scénář po zavedení "tvrdého zákazu" v testovacích regionech. 
                    Vidíme prudký pokles v prvních týdnech, následovaný postupným návratem uživatelů, jak se šíří informace o technických obcházkách.
                </p>
            </div>
            
            <div class="card md:col-span-2">
                <div class="flex justify-between items-center mb-4">
                    <h4 class="font-bold text-gray-700">Trend aktivity uživatelů</h4>
                    <button onclick="analyzeChart('usage')" class="text-xs bg-indigo-100 hover:bg-indigo-200 text-indigo-700 py-1 px-3 rounded-full flex items-center transition">
                        <span class="mr-1">✨</span> AI Analýza Trendu
                    </button>
                </div>
                <div class="chart-container">
                    <canvas id="usageTrendChart"></canvas>
                </div>
                <div id="usage-analysis" class="hidden mt-4 p-3 bg-indigo-50 border border-indigo-100 rounded-lg text-sm text-indigo-800"></div>
                <p class="mt-4 text-sm text-gray-500 italic text-center">Data modelována na základě případových studií z let 2023-2024.</p>
            </div>
        </div>

        <!-- Section 2: The VPN Surge -->
        <div id="vpn" class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
            <div class="lg:col-span-1 space-y-6">
                <h3 class="text-2xl font-bold text-gray-900 border-l-4 border-pink-600 pl-4">Fenomén VPN</h3>
                <p class="text-gray-600">
                    Jakmile je oznámena legislativa omezující přístup, zájem o Virtuální Privátní Sítě (VPN) raketově stoupá. 
                    Pro digitálně gramotnou generaci Z a Alpha představuje VPN nejjednodušší způsob, jak obejít geoblokaci nebo síťové filtry.
                </p>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h4 class="font-bold text-gray-800 mb-2">Co data říkají?</h4>
                    <ul class="space-y-2 text-sm text-gray-600">
                        <li class="flex items-start"><span class="mr-2 text-pink-500">➤</span> Vyhledávání termínu "Free VPN" stoupá hodiny po oznámení.</li>
                        <li class="flex items-start"><span class="mr-2 text-pink-500">➤</span> Aplikace maskující se jako "kalkulačky" získávají na popularitě.</li>
                    </ul>
                </div>
            </div>

            <div class="card lg:col-span-2">
                 <div class="flex justify-between items-center mb-4">
                    <h4 class="font-bold text-gray-700">Index vyhledávání VPN</h4>
                    <button onclick="analyzeChart('vpn')" class="text-xs bg-pink-100 hover:bg-pink-200 text-pink-700 py-1 px-3 rounded-full flex items-center transition">
                        <span class="mr-1">✨</span> AI Analýza Dat
                    </button>
                </div>
                <div class="chart-container">
                    <canvas id="vpnChart"></canvas>
                </div>
                 <div id="vpn-analysis" class="hidden mt-4 p-3 bg-pink-50 border border-pink-100 rounded-lg text-sm text-pink-800"></div>
            </div>
        </div>

        <!-- Section 3: Evasion Methods & Tech Breakdown -->
        <div id="methods" class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-4">
                <h3 class="text-2xl font-bold text-gray-900 border-l-4 border-purple-600 pl-4">Jak děti obcházejí zákazy?</h3>
                <p class="text-gray-600">
                    Zákaz není zeď, ale překážka. Následující vizualizace ukazuje distribuci metod, které nezletilí používají k udržení přístupu na své oblíbené platformy.
                    Dominují technická řešení a sdílení účtů.
                </p>
                <div class="card">
                     <div class="chart-container">
                        <canvas id="methodsChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <h3 class="text-2xl font-bold text-gray-900 border-l-4 border-yellow-500 pl-4">Koloběh digitálního odporu</h3>
                <p class="text-gray-600">
                    Schéma ukazuje typický cyklus reakce na regulační opatření. Každá nová bariéra vytváří trh pro nové nástroje obcházení.
                </p>
                
                <!-- HTML/CSS Flowchart (No SVG/Mermaid) -->
                <div class="bg-white p-6 rounded-xl shadow-lg h-full flex flex-col justify-center space-y-4">
                    <div class="flow-step border-indigo-200 bg-indigo-50 text-indigo-800">
                        1. Legislativní Zákaz
                        <div class="text-xs font-normal mt-1">Stát blokuje IP adresy platforem</div>
                    </div>
                    <div class="text-center text-gray-400 text-2xl font-bold">⬇</div>
                    <div class="flow-step border-pink-200 bg-pink-50 text-pink-800">
                        2. Digitální Panika
                        <div class="text-xs font-normal mt-1">Masivní stahování VPN a Proxy</div>
                    </div>
                    <div class="text-center text-gray-400 text-2xl font-bold">⬇</div>
                    <div class="flow-step border-purple-200 bg-purple-50 text-purple-800">
                        3. Adaptace Komunity
                        <div class="text-xs font-normal mt-1">Sdílení návodů na Discordu/Školních chatech</div>
                    </div>
                    <div class="text-center text-gray-400 text-2xl font-bold">⬇</div>
                    <div class="flow-step border-green-200 bg-green-50 text-green-800">
                        4. Normalizace
                        <div class="text-xs font-normal mt-1">Užívání pokračuje skrytě (šifrovaný provoz)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Sentiment Analysis -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
             <div class="card lg:col-span-1">
                <h4 class="text-lg font-bold text-gray-800 mb-4 text-center">Postoj dospívajících k zákazu</h4>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="sentimentChart"></canvas>
                </div>
            </div>
            
            <div class="card lg:col-span-2">
                <h4 class="text-lg font-bold text-gray-800 mb-4">Kvalita online času před a po omezení</h4>
                <div class="chart-container">
                    <div id="plotlyQualityChart" style="width: 100%; height: 100%;"></div>
                </div>
                <p class="mt-2 text-sm text-gray-500">
                    Zatímco kvantita času stráveného online může klesnout, data naznačují, že "zakázané ovoce" zvyšuje intenzitu interakcí, 
                    kdy se uživatelé snaží dohnat ztracený čas v kratších oknech (např. přes Wi-Fi kamaráda).
                </p>
            </div>
        </div>

        <!-- NEW: AI RESEARCH LAB SECTION (DEMO) -->
        <div id="ai-lab" class="bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl p-8 text-white shadow-2xl ai-glow">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <div>
                    <h2 class="text-3xl font-extrabold flex items-center">
                        <span class="mr-3">✨</span> AI Výzkumná Laboratoř
                    </h2>
                    <p class="text-indigo-200 mt-2">Simulujte dopad nových regulací (Demo Mód)</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Simulation Controls -->
                <div class="space-y-4">
                    <div class="bg-white/10 backdrop-blur-md p-6 rounded-xl border border-white/20">
                        <h3 class="font-bold text-lg mb-4">Parametry Simulace</h3>
                        
                        <label class="block text-sm font-medium text-indigo-200 mb-1">Typ zákazu</label>
                        <select id="sim-type" class="w-full bg-indigo-950/50 border border-indigo-500 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-pink-500 mb-4">
                            <option value="hard">Tvrdý blok IP adres (Hard Block)</option>
                            <option value="id">Povinné ověření ID (Age Gate)</option>
                            <option value="curfew">Digitální večerka (22:00 - 06:00)</option>
                            <option value="school">Zákaz telefonů ve školách</option>
                        </select>

                        <label class="block text-sm font-medium text-indigo-200 mb-1">Cílová věková skupina</label>
                        <select id="sim-age" class="w-full bg-indigo-950/50 border border-indigo-500 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-pink-500 mb-4">
                            <option value="10-12">Děti (10-12 let)</option>
                            <option value="13-15">Mladší teenageři (13-15 let)</option>
                            <option value="16-18">Starší teenageři (16-18 let)</option>
                        </select>

                        <button onclick="runSimulation()" class="w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transform transition hover:scale-105 flex justify-center items-center">
                            <span class="mr-2">✨</span> Spustit Simulaci
                        </button>
                    </div>
                </div>

                <!-- Simulation Output -->
                <div class="bg-black/20 backdrop-blur-sm p-6 rounded-xl border border-white/10 min-h-[300px] flex flex-col">
                    <h3 class="font-bold text-lg mb-4 text-indigo-100">Výsledek Predikce</h3>
                    <div id="sim-output" class="flex-grow text-gray-300 space-y-3">
                        <p class="italic text-gray-500">Zadejte parametry a spusťte simulaci pro zobrazení predikce dopadu (Simulováno).</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-900 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-semibold text-lg mb-2">Shrnutí výzkumu</p>
            <p class="text-gray-400 text-sm max-w-2xl mx-auto">
                Technologické zákazy bez edukace vedou k "efektu hydry". Místo jedné kontrolované platformy vznikají desítky neregulovaných kanálů. 
                VPN se stávají běžnou součástí digitální výbavy dětí již od 12 let.
            </p>
            <div class="mt-6 text-xs text-gray-600">
                Generated by Canvas Infographics &bull; No SVG used &bull; No Mermaid JS used &bull; Demo Mode
            </div>
        </div>
    </footer>

    <script>
        // --- OFFLINE DEMO LOGIC (SIMULATED AI) ---
        
        // This replaces the live Gemini call with static, pre-written insights
        
        async function analyzeChart(chartType) {
            const outputId = chartType === 'usage' ? 'usage-analysis' : 'vpn-analysis';
            const outputEl = document.getElementById(outputId);
            
            outputEl.classList.remove('hidden');
            outputEl.innerHTML = '<span class="loading-dots">AI analyzuje data</span>';

            // Simulate network delay
            setTimeout(() => {
                let result = "";
                if (chartType === 'usage') {
                    result = "Z grafu je patrné, že technické blokace mají pouze krátkodobý efekt (cca 4 týdny). Uživatelé se rychle adaptují, což naznačuje vysokou digitální gramotnost v oblasti obcházení restrikcí.";
                } else if (chartType === 'vpn') {
                    result = "Korelace je kritická: oznámení zákazu funguje jako bezplatná reklama pro VPN služby. Děti jsou tak paradoxně tlačeny do používání nástrojů, které mohou skrývat malware nebo sbírat jejich data.";
                }
                outputEl.innerHTML = `<strong>AI Insight:</strong> ${result}`;
            }, 1000);
        }

        async function runSimulation() {
            const type = document.getElementById('sim-type').value;
            const age = document.getElementById('sim-age').value;
            const outputEl = document.getElementById('sim-output');

            outputEl.innerHTML = '<div class="flex items-center text-indigo-300"><span class="loading-dots text-2xl mr-2">Generování simulace</span></div>';

            // Simulate network delay
            setTimeout(() => {
                let efficiency = 0;
                let method = "";
                let risk = "";

                // Simple logic to generate "smart" looking responses
                if (type === 'hard') {
                    efficiency = age === '10-12' ? 65 : 15;
                    method = age === '10-12' ? "Hraní offline her" : "VPN a Proxy servery";
                    risk = "Masivní přechod na neregulované dark-web fóra.";
                } else if (type === 'id') {
                    efficiency = 40;
                    method = "Použití dokladů rodičů nebo sourozenců";
                    risk = "Krádeže identity v rodině a sdílení citlivých dat třetím stranám.";
                } else if (type === 'curfew') {
                    efficiency = 80;
                    method = "Změna časového pásma na zařízení";
                    risk = "Spánková deprivace (děti vstávají dříve, aby dohnaly čas).";
                } else { // school
                    efficiency = 90;
                    method = "Použití starých 'hloupých' telefonů nebo chytrých hodinek";
                    risk = "Sociální vyloučení dětí bez drahých nositelných zařízení.";
                }

                const result = `
                    <div class="space-y-4">
                        <div class="border-b border-white/10 pb-2">
                            <span class="text-indigo-400 text-xs uppercase tracking-wider">Úspěšnost zákazu (1 měsíc)</span>
                            <div class="text-2xl font-bold text-white">${efficiency}% <span class="text-sm font-normal text-gray-400">udržení blokace</span></div>
                        </div>
                        <div class="border-b border-white/10 pb-2">
                            <span class="text-indigo-400 text-xs uppercase tracking-wider">Dominantní metoda obcházení</span>
                            <div class="text-lg text-white">${method}</div>
                        </div>
                        <div>
                            <span class="text-pink-400 text-xs uppercase tracking-wider">Identifikované riziko</span>
                            <div class="text-white font-medium bg-pink-900/30 p-2 rounded border border-pink-500/30 mt-1">⚠️ ${risk}</div>
                        </div>
                    </div>
                `;
                outputEl.innerHTML = result;
            }, 1500);
        }

        // --- UTILITY FUNCTIONS ---

        function formatLabel(str, maxwidth) {
            if (typeof str !== 'string' || str.length <= maxwidth) return str;
            const sections = [];
            const words = str.split(' ');
            let temp = '';
            words.forEach(function(item, index) {
                if (temp.length > 0) {
                    const concat = temp + ' ' + item;
                    if (concat.length > maxwidth) {
                        sections.push(temp);
                        temp = item;
                    } else {
                        temp = concat;
                    }
                } else {
                    temp = item;
                }
                if (index === words.length - 1) {
                    sections.push(temp);
                }
            });
            return sections;
        }

        const colors = {
            indigo: '#4F46E5',
            pink: '#EC4899',
            purple: '#8B5CF6',
            amber: '#F59E0B',
            teal: '#14B8A6',
            gray: '#9CA3AF'
        };

        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#4B5563';
        Chart.defaults.scale.grid.color = '#E5E7EB';

        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART 1: USAGE TRENDS ---
        const ctxUsage = document.getElementById('usageTrendChart').getContext('2d');
        const rawLabelsUsage = ['Týden před', 'Zákaz vyhlášen', 'Týden 1', 'Týden 2', 'Týden 4', 'Měsíc 2', 'Měsíc 3', 'Měsíc 6'];
        const processedLabelsUsage = rawLabelsUsage.map(l => formatLabel(l, 16));

        new Chart(ctxUsage, {
            type: 'line',
            data: {
                labels: processedLabelsUsage,
                datasets: [
                    {
                        label: 'Oficiální provoz (Data ISP)',
                        data: [100, 95, 40, 35, 30, 28, 25, 20],
                        borderColor: colors.indigo,
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Skutečný provoz (Včetně VPN/Šifrování)',
                        data: [100, 98, 75, 80, 85, 90, 92, 95],
                        borderColor: colors.pink,
                        borderWidth: 3,
                        borderDash: [5, 5],
                        tension: 0.4,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: tooltipConfig
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: '% Aktivních uživatelů' }
                    }
                }
            }
        });

        // --- CHART 2: VPN SEARCH VOLUME ---
        const ctxVpn = document.getElementById('vpnChart').getContext('2d');
        const rawLabelsVpn = ['Normální období', 'Den oznámení', 'Den implementace', 'Týden po zákazu', 'Měsíc po zákazu'];
        const processedLabelsVpn = rawLabelsVpn.map(l => formatLabel(l, 16));

        new Chart(ctxVpn, {
            type: 'bar',
            data: {
                labels: processedLabelsVpn,
                datasets: [{
                    label: 'Index vyhledávání "VPN Bypass"',
                    data: [15, 100, 85, 60, 45],
                    backgroundColor: [
                        colors.gray,
                        colors.pink,
                        colors.purple,
                        colors.indigo,
                        colors.indigo
                    ],
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: tooltipConfig
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Relativní objem vyhledávání (Index 0-100)' }
                    }
                }
            }
        });

        // --- CHART 3: EVASION METHODS ---
        const ctxMethods = document.getElementById('methodsChart').getContext('2d');
        const rawLabelsMethods = ['Použití VPN služeb', 'Falešné datum narození', 'Účet rodičů/Sourozenců', 'Alternativní platformy', 'DNS Změny'];
        const processedLabelsMethods = rawLabelsMethods.map(l => formatLabel(l, 16));

        new Chart(ctxMethods, {
            type: 'bar',
            data: {
                labels: processedLabelsMethods,
                datasets: [{
                    label: 'Popularita metody (%)',
                    data: [45, 25, 15, 10, 5],
                    backgroundColor: [
                        colors.indigo,
                        colors.purple,
                        colors.pink,
                        colors.amber,
                        colors.teal
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: tooltipConfig
                },
                scales: {
                    x: { beginAtZero: true }
                }
            }
        });

        // --- CHART 4: SENTIMENT ---
        const ctxSentiment = document.getElementById('sentimentChart').getContext('2d');
        const rawLabelsSentiment = ['Hledají cesty jak obejít', 'Přesun na jiné sítě', 'Respektují zákaz', 'Frustrace/Vztek'];
        const processedLabelsSentiment = rawLabelsSentiment.map(l => formatLabel(l, 16));

        new Chart(ctxSentiment, {
            type: 'doughnut',
            data: {
                labels: processedLabelsSentiment,
                datasets: [{
                    data: [40, 30, 10, 20],
                    backgroundColor: [
                        colors.indigo,
                        colors.purple,
                        colors.teal,
                        colors.pink
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { boxWidth: 12, padding: 20 } },
                    tooltip: tooltipConfig
                }
            }
        });

        // --- CHART 5: PLOTLY ---
        const trace1 = {
            x: ['Pocit propojení', 'Strach z promeškání (FOMO)', 'Digitální stres'],
            y: [80, 60, 40],
            name: 'Před zákazem',
            type: 'bar',
            marker: {color: '#9CA3AF'}
        };

        const trace2 = {
            x: ['Pocit propojení', 'Strach z promeškání (FOMO)', 'Digitální stres'],
            y: [45, 85, 75],
            name: 'Po zákazu',
            type: 'bar',
            marker: {color: '#EC4899'}
        };

        const dataPlotly = [trace1, trace2];

        const layoutPlotly = {
            barmode: 'group',
            margin: { t: 30, l: 40, r: 20, b: 40 },
            showlegend: true,
            legend: { orientation: 'h', y: 1.1 },
            font: { family: 'Inter, sans-serif' },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)'
        };

        const configPlotly = {
            responsive: true,
            displayModeBar: false,
            modeBarButtonsToRemove: ['toImage', 'sendDataToCloud']
        };

        Plotly.newPlot('plotlyQualityChart', dataPlotly, layoutPlotly, configPlotly);

    </script>
</body>
</html>